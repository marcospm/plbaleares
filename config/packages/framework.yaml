# see https://symfony.com/doc/current/reference/configuration/framework.html
framework:
    secret: '%env(APP_SECRET)%'

    # Note that the session will be started ONLY if you read or write from it.
    session:
        enabled: true
        # Tiempo de vida de la cookie de sesión (en segundos) - 24 horas
        cookie_lifetime: 86400
        # Tiempo máximo de vida de la sesión en el servidor (en segundos) - 24 horas
        gc_maxlifetime: 86400
        # Cookie segura (auto detecta HTTPS)
        cookie_secure: auto
        # Cookie HTTP only (protección XSS)
        cookie_httponly: true
        # SameSite cookie (protección CSRF) - usar 'lax' para permitir navegación normal
        cookie_samesite: lax
        # Ruta de la cookie
        cookie_path: /
        # Actualizar metadatos de sesión cada 60 segundos (evita regeneración innecesaria)
        metadata_update_threshold: 60
        # No regenerar el ID de sesión automáticamente
        # name: PHPSESSID
    
    # Configurar zona horaria
    default_locale: es
    php_errors:
        log: true

    #esi: true
    #fragments: true
    
    # Asset versioning para cache busting en despliegues
    # Se genera automáticamente basado en APP_VERSION, GIT_COMMIT o timestamp
    assets:
        version_strategy: App\Service\AssetVersionStrategy
        version_format: '%%s?v=%%s'

when@test:
    framework:
        test: true
        session:
            storage_factory_id: session.storage.factory.mock_file
