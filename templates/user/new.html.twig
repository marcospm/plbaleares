{% extends 'base.html.twig' %}

{% block title %}Crear Nuevo Usuario{% endblock %}

{% block body %}
<div class="d-flex justify-content-between mb-4">
    <h1>Crear Nuevo Usuario</h1>
    <a href="{{ path('app_user_index') }}" class="btn btn-secondary">Volver a la Lista</a>
</div>

<div class="card">
    <div class="card-header" style="background-color: #f8f9fa; border-bottom: 1px solid #dee2e6;">
        <h3 style="margin: 0; color: #333; font-size: 1.1rem; font-weight: 600;">
            ‚ûï Crear Nuevo Usuario
        </h3>
    </div>
    <div class="card-body">
        {{ form_start(form) }}
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 1.5rem;">
                {# Informaci√≥n B√°sica y Acceso #}
                <div>
                    <h4 style="color: var(--color-primary); margin-bottom: 1rem; border-bottom: 2px solid var(--color-primary); padding-bottom: 0.5rem;">
                        üë§ Informaci√≥n B√°sica
                    </h4>
                    {{ form_row(form.nombre) }}
                    {{ form_row(form.username) }}
                    {{ form_row(form.email) }}
                    {{ form_row(form.telefono) }}
                    {{ form_row(form.dni) }}
                    {{ form_row(form.fechaNacimiento) }}
                    {{ form_row(form.sexo) }}
                </div>

                {# Acceso y Roles #}
                <div>
                    <h4 style="color: var(--color-primary); margin-bottom: 1rem; border-bottom: 2px solid var(--color-primary); padding-bottom: 0.5rem;">
                        üîê Acceso y Roles
                    </h4>
                    {{ form_row(form.plainPassword.first, {'label': 'Contrase√±a'}) }}
                    {{ form_row(form.plainPassword.second, {'label': 'Repetir Contrase√±a'}) }}
                    {{ form_row(form.roles) }}
                    <div class="alert alert-info" style="margin-top: 1rem;">
                        <small>
                            <strong>üí° Nota:</strong> El usuario se crear√° como <strong>inactivo</strong> por defecto. 
                            Deber√°s activarlo manualmente desde la lista de usuarios.
                        </small>
                    </div>
                </div>

                {# Direcci√≥n #}
                <div>
                    <h4 style="color: var(--color-primary); margin-bottom: 1rem; border-bottom: 2px solid var(--color-primary); padding-bottom: 0.5rem;">
                        üìç Direcci√≥n
                    </h4>
                    {{ form_row(form.direccion) }}
                    {{ form_row(form.codigoPostal) }}
                    {{ form_row(form.ciudad) }}
                    {{ form_row(form.provincia) }}
                </div>
            </div>

            {# Datos Bancarios y Notas #}
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 1.5rem; margin-top: 1.5rem;">
                <div>
                    <h4 style="color: var(--color-primary); margin-bottom: 1rem; border-bottom: 2px solid var(--color-primary); padding-bottom: 0.5rem;">
                        üí≥ Datos Bancarios
                    </h4>
                    {{ form_row(form.iban) }}
                    {{ form_row(form.banco) }}
                </div>

                <div>
                    <h4 style="color: var(--color-primary); margin-bottom: 1rem; border-bottom: 2px solid var(--color-primary); padding-bottom: 0.5rem;">
                        üìù Notas
                    </h4>
                    {{ form_row(form.notas) }}
                </div>
            </div>
            
            <div class="d-flex gap-2 mt-4">
                <button type="submit" class="btn btn-primary">Crear Usuario</button>
                <a href="{{ path('app_user_index') }}" class="btn btn-secondary">Cancelar</a>
            </div>
        {{ form_end(form) }}
    </div>
</div>
{% endblock %}

